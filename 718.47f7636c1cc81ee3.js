"use strict";(self.webpackChunkmanniwatch=self.webpackChunkmanniwatch||[]).push([[718],{1718:(J,c,n)=>{n.r(c),n.d(c,{StopPointModule:()=>U});var P=n(6895),h=n(7392),v=n(4046),m=n(1572),p=n(3848),O=n(3683),T=n(83),I=n(2576),M=n(1837),C=n(8507),b=n(3411),t=n(4650),r=n(3948),i=n(6159);let f=(()=>{class o extends b.Z{constructor(e,s,u){super(s,u),this.api=e}createLoader(e,s){return this.api.getStopPointPassages(e.params.stopPointId)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(r.sM),t.LFG(i.F0),t.LFG(r.jn))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var N=n(7445),d=n(4004),l=n(3900),R=n(590),F=n(5577),S=n(8675);let g=(()=>{class o{constructor(e,s,u,$){this.route=e,this.apiService=s,this.stopService=u,this.appRef=$,this.stopPassageObservable=this.route.data.pipe((0,d.U)(D=>D.stopPoint))}createStopPassageRefreshObservable(){return this.stopPassageObservable.pipe((0,l.w)(e=>this.appRef.isStable.pipe((0,R.P)(s=>s),(0,F.z)(()=>(0,N.F)(5e3).pipe((0,l.w)(()=>this.apiService.getStopPointPassages(e.stopShortName)))),(0,S.O)(e))))}createStopPointLocationObservable(){return this.stopPassageObservable.pipe((0,l.w)(e=>this.stopService.watchStopPoint(e.stopShortName).pipe((0,S.O)(void 0))),(0,d.U)(e=>null==e?{map:{blur:!0}}:{map:{blur:!1,center:e}}))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(i.gz),t.LFG(r.sM),t.LFG(r.gd),t.LFG(t.z2F))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var y=n(9937),E=n(9656),x=n(1959),A=n(8277);function L(o,a){1&o&&(t.TgZ(0,"div",8)(1,"h3"),t._uU(2,"Error occured"),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Will retry in a 0s"),t.qZA()())}function Z(o,a){1&o&&t.YNc(0,L,5,0,"ng-template")}const z=[{component:(()=>{class o{constructor(e){this.stopInfoService=e,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.stopInfoService.createStopPointLocationObservable().subscribe({next:e=>{this.headerMapData=e}})),this.subscriptions.push(this.stopInfoService.createStopPassageRefreshObservable().subscribe({next:e=>{this.stopPassage=e}}))}ngOnDestroy(){this.subscriptions.forEach(e=>{e.unsubscribe()}),this.subscriptions=[]}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-stop-point-info"]],features:[t._Bn([g])],decls:8,vars:5,consts:function(){let a,e;return a=$localize`:tab header departures|Departures@@departures␟891e36a38df10a0b8940219f4a51a03ea982c084␟1335502203219771538:Departures`,e=$localize`:tab header routes|Routes@@Routes␟41f0d60bbecc9f4b18c97c3656eeafe9a8f6d101␟99095597038876536:Routes`,[[3,"title"],["appOlStatic","",3,"mapData"],["mat-stretch-tabs","","dynamicHeight",""],["label",a],[3,"departures"],["label",e],[3,"routes"],[4,"ngIf"],[1,"error-box"]]},template:function(e,s){1&e&&(t.TgZ(0,"app-header-box",0),t._UZ(1,"map",1),t.qZA(),t.TgZ(2,"mat-tab-group",2)(3,"mat-tab",3),t._UZ(4,"app-departure-list",4),t.qZA(),t.TgZ(5,"mat-tab",5),t._UZ(6,"app-route-list",6),t.qZA()(),t.YNc(7,Z,1,0,null,7)),2&e&&(t.s9C("title",null==s.stopPassage?null:s.stopPassage.stopName),t.xp6(1),t.Q6J("mapData",s.headerMapData),t.xp6(3),t.Q6J("departures",null==s.stopPassage?null:s.stopPassage.actual),t.xp6(2),t.Q6J("routes",null==s.stopPassage?null:s.stopPassage.routes),t.xp6(1),t.Q6J("ngIf",!1))},dependencies:[P.O5,y.e,p.uX,p.SP,E.c,x.C,A.q],styles:["mat-tab-group[_ngcontent-%COMP%]{flex-grow:1}div.error-box[_ngcontent-%COMP%]{flex:0 0 auto;background:#b00020;color:#fff;padding:5px 20px}div.error-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:25px;line-height:30px;padding:0;margin:0}div.error-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;line-height:20px;padding:0;margin:0}"]}),o})(),data:{openSidebar:!0},path:":stopPointId",resolve:{stopPoint:f}}];let G=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[i.Bz.forChild(z),i.Bz]}),o})(),U=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[f],imports:[P.ez,T.n,h.Ps,v.ie,O.g0,m.Cq,G,p.Nh,I.D,M.qe,C.W]}),o})()}}]);