{"version":3,"sources":["./src/app/routes/search/search-routing.module.ts","./src/app/routes/search/search-result.resolver.ts","./src/app/routes/search/search.module.ts","./src/app/routes/search/search.component.ts","./src/app/routes/search/search.component.html","./src/app/routes/search/index.ts"],"names":[],"mappings":"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","file":"routes-search-es2015.js","sourcesContent":["/*!\n * Source https://github.com/manniwatch/manniwatch Package: client-ng\n */\n\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { SearchResultResolver } from './search-result.resolver';\nimport { SearchComponent } from './search.component';\n\nconst tripPassagesRoute: Routes = [\n    {\n        component: SearchComponent,\n        path: '',\n        resolve: {\n            results: SearchResultResolver,\n        },\n        runGuardsAndResolvers: 'paramsOrQueryParamsChange',\n    },\n];\n\n@NgModule({\n    exports: [\n        RouterModule,\n    ],\n    imports: [\n        RouterModule.forChild(tripPassagesRoute),\n    ],\n})\nexport class SearchRoutingModule { }\n","/*!\n * Source https://github.com/manniwatch/manniwatch Package: client-ng\n */\n\nimport { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, Resolve, RouterStateSnapshot } from '@angular/router';\nimport { IStopLocation } from '@manniwatch/api-types';\nimport { Observable } from 'rxjs';\nimport { map, take } from 'rxjs/operators';\nimport { StopPointService } from 'src/app/services/stop-point.service';\n\n@Injectable()\nexport class SearchResultResolver implements Resolve<any> {\n\n    public constructor(private stopService: StopPointService) { }\n    public resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<IStopLocation[]> {\n        return this.stopService.stopObservable\n            .pipe(take(1),\n                map((stops: IStopLocation[]): IStopLocation[] =>\n                    stops\n                        /**\n                         * Filter by search term\n                         */\n                        .filter((option: IStopLocation): boolean => option.name.toLowerCase().includes(route.queryParams.q))\n                        .sort((a: IStopLocation, b: IStopLocation): number => a.name.localeCompare(b.name))));\n    }\n}\n","/*!\n * Source https://github.com/manniwatch/manniwatch Package: client-ng\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { SearchResultResolver } from './search-result.resolver';\nimport { SearchRoutingModule } from './search-routing.module';\nimport { SearchComponent } from './search.component';\n@NgModule({\n    declarations: [\n        SearchComponent,\n    ],\n    imports: [\n        CommonModule,\n        SearchRoutingModule,\n        MatIconModule,\n        MatListModule,\n    ],\n    providers: [\n        SearchResultResolver,\n    ],\n})\nexport class SearchModule { }\n","/*!\n * Source https://github.com/manniwatch/manniwatch Package: client-ng\n */\n\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Title } from '@angular/platform-browser';\nimport { ActivatedRoute, Data, Params } from '@angular/router';\nimport { IStopLocation } from '@manniwatch/api-types';\nimport { NEVER, Observable, Subscription } from 'rxjs';\nimport { map } from 'rxjs/operators';\n@Component({\n    selector: 'app-search',\n    styleUrls: ['./search.component.scss'],\n    templateUrl: './search.component.html',\n})\nexport class SearchComponent implements OnInit, OnDestroy {\n\n    public get results(): Observable<IStopLocation[]> {\n        return this.resultObservable;\n    }\n    public data: string = '';\n    private searchParamSubscription: Subscription;\n    private resultObservable: Observable<IStopLocation[]> = NEVER;\n    public constructor(private activatedRoute: ActivatedRoute, private titleService: Title) {\n\n    }\n\n    public ngOnInit(): void {\n        this.searchParamSubscription = this.activatedRoute\n            .queryParams.subscribe((value: Params): void => {\n                this.data = value.q ? value.q : '';\n                this.titleService.setTitle('Search - \\\"' + this.data + '\\\"');\n            });\n        this.resultObservable = this.activatedRoute.data\n            .pipe(map((val: Data): IStopLocation[] => {\n                if (val.results) {\n                    return val.results;\n                }\n                return [];\n            }));\n    }\n    public ngOnDestroy(): void {\n        if (this.searchParamSubscription) {\n            this.searchParamSubscription.unsubscribe();\n        }\n    }\n}\n","<mat-nav-list role=\"navigation\"><a *ngFor=\"let item of results | async\" [routerLink]=\"['/stop', item.shortName]\" role=\"listitem\"><mat-list-item><mat-icon mat-list-icon>place</mat-icon><h4 mat-line>{{item?.name}}</h4></mat-list-item></a></mat-nav-list>","/*!\n * Source https://github.com/manniwatch/manniwatch Package: client-ng\n */\n\nexport { SearchModule } from './search.module';\n"],"sourceRoot":"webpack:///"}