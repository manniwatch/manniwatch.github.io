{"version":3,"sources":["webpack:///src/app/routes/search/search-routing.module.ts","webpack:///src/app/routes/search/search-result.resolver.ts","webpack:///src/app/routes/search/search.module.ts","webpack:///src/app/routes/search/search.component.ts","webpack:///src/app/routes/search/search.component.html","webpack:///src/app/routes/search/index.ts"],"names":["tripPassagesRoute","component","path","resolve","results","runGuardsAndResolvers","SearchRoutingModule","forChild","SearchResultResolver","stopService","route","state","stopObservable","pipe","stops","filter","option","name","toLowerCase","includes","queryParams","q","sort","a","b","localeCompare","SearchModule","SearchComponent","activatedRoute","titleService","data","resultObservable","searchParamSubscription","subscribe","value","setTitle","val","unsubscribe"],"mappings":"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","file":"routes-search-es5.js","sourcesContent":["/*!\n * Source https://github.com/manniwatch/manniwatch Package: client-ng\n */\n\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { SearchResultResolver } from './search-result.resolver';\nimport { SearchComponent } from './search.component';\n\nconst tripPassagesRoute: Routes = [\n    {\n        component: SearchComponent,\n        path: '',\n        resolve: {\n            results: SearchResultResolver,\n        },\n        runGuardsAndResolvers: 'paramsOrQueryParamsChange',\n    },\n];\n\n@NgModule({\n    exports: [\n        RouterModule,\n    ],\n    imports: [\n        RouterModule.forChild(tripPassagesRoute),\n    ],\n})\nexport class SearchRoutingModule { }\n","/*!\n * Source https://github.com/manniwatch/manniwatch Package: client-ng\n */\n\nimport { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, Resolve, RouterStateSnapshot } from '@angular/router';\nimport { IStopLocation } from '@manniwatch/api-types';\nimport { Observable } from 'rxjs';\nimport { map, take } from 'rxjs/operators';\nimport { StopPointService } from 'src/app/services/stop-point.service';\n\n@Injectable()\nexport class SearchResultResolver implements Resolve<any> {\n\n    public constructor(private stopService: StopPointService) { }\n    public resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<IStopLocation[]> {\n        return this.stopService.stopObservable\n            .pipe(take(1),\n                map((stops: IStopLocation[]): IStopLocation[] =>\n                    stops\n                        /**\n                         * Filter by search term\n                         */\n                        .filter((option: IStopLocation): boolean => option.name.toLowerCase().includes(route.queryParams.q))\n                        .sort((a: IStopLocation, b: IStopLocation): number => a.name.localeCompare(b.name))));\n    }\n}\n","/*!\n * Source https://github.com/manniwatch/manniwatch Package: client-ng\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { SearchResultResolver } from './search-result.resolver';\nimport { SearchRoutingModule } from './search-routing.module';\nimport { SearchComponent } from './search.component';\n@NgModule({\n    declarations: [\n        SearchComponent,\n    ],\n    imports: [\n        CommonModule,\n        SearchRoutingModule,\n        MatIconModule,\n        MatListModule,\n    ],\n    providers: [\n        SearchResultResolver,\n    ],\n})\nexport class SearchModule { }\n","/*!\n * Source https://github.com/manniwatch/manniwatch Package: client-ng\n */\n\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Title } from '@angular/platform-browser';\nimport { ActivatedRoute, Data, Params } from '@angular/router';\nimport { IStopLocation } from '@manniwatch/api-types';\nimport { NEVER, Observable, Subscription } from 'rxjs';\nimport { map } from 'rxjs/operators';\n@Component({\n    selector: 'app-search',\n    styleUrls: ['./search.component.scss'],\n    templateUrl: './search.component.html',\n})\nexport class SearchComponent implements OnInit, OnDestroy {\n\n    public get results(): Observable<IStopLocation[]> {\n        return this.resultObservable;\n    }\n    public data: string = '';\n    private searchParamSubscription: Subscription;\n    private resultObservable: Observable<IStopLocation[]> = NEVER;\n    public constructor(private activatedRoute: ActivatedRoute, private titleService: Title) {\n\n    }\n\n    public ngOnInit(): void {\n        this.searchParamSubscription = this.activatedRoute\n            .queryParams.subscribe((value: Params): void => {\n                this.data = value.q ? value.q : '';\n                this.titleService.setTitle('Search - \\\"' + this.data + '\\\"');\n            });\n        this.resultObservable = this.activatedRoute.data\n            .pipe(map((val: Data): IStopLocation[] => {\n                if (val.results) {\n                    return val.results;\n                }\n                return [];\n            }));\n    }\n    public ngOnDestroy(): void {\n        if (this.searchParamSubscription) {\n            this.searchParamSubscription.unsubscribe();\n        }\n    }\n}\n","<mat-nav-list role=\"navigation\"><a *ngFor=\"let item of results | async\" [routerLink]=\"['/stop', item.shortName]\" role=\"listitem\"><mat-list-item><mat-icon mat-list-icon>place</mat-icon><h4 mat-line>{{item?.name}}</h4></mat-list-item></a></mat-nav-list>","/*!\n * Source https://github.com/manniwatch/manniwatch Package: client-ng\n */\n\nexport { SearchModule } from './search.module';\n"]}