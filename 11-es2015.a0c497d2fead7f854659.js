(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{NHX4:function(t,e,a){"use strict";a.r(e),a.d(e,"StopPointModule",function(){return k});var s=a("ofXK"),r=a("NFeN"),o=a("MutI"),n=a("Xa2L"),i=a("wZkO"),p=a("/t3+"),c=a("adpU"),b=a("3cPY"),u=a("RSro"),l=a("Rfd2"),h=a("EY2u"),f=a("JIr8"),d=a("fXoL"),g=a("o0su"),P=a("tyNb");let O=(()=>{class t{constructor(t,e){this.api=t,this.router=e}resolve(t,e){return this.api.getStopPointPassages(t.params.stopPointId).pipe(Object(f.a)(t=>(404===t.status&&this.router.navigate(["stops"]),h.a)))}}return t.\u0275fac=function(e){return new(e||t)(d.Ub(g.a),d.Ub(P.f))},t.\u0275prov=d.Gb({token:t,factory:t.\u0275fac}),t})();var v=a("l5mm"),m=a("lJxs"),S=a("eIep"),x=a("SxV6"),w=a("5+tZ"),y=a("JX91");let I=(()=>{class t{constructor(t,e,a,s){this.route=t,this.apiService=e,this.stopService=a,this.appRef=s,this.stopPassageObservable=this.route.data.pipe(Object(m.a)(t=>t.stopPoint))}createStopPassageRefreshObservable(){return this.stopPassageObservable.pipe(Object(S.a)(t=>this.appRef.isStable.pipe(Object(x.a)(t=>t),Object(w.a)(()=>Object(v.a)(5e3).pipe(Object(S.a)(()=>this.apiService.getStopPointPassages(t.stopShortName)))),Object(y.a)(t))))}createStopPointLocationObservable(){return this.stopPassageObservable.pipe(Object(S.a)(t=>this.stopService.watchStopPoint(t.stopShortName).pipe(Object(y.a)(void 0))),Object(m.a)(t=>null==t?{map:{blur:!0}}:{map:{blur:!1,center:t}}))}}return t.\u0275fac=function(e){return new(e||t)(d.Ub(P.a),d.Ub(g.a),d.Ub(g.c),d.Ub(d.g))},t.\u0275prov=d.Gb({token:t,factory:t.\u0275fac}),t})();var j=a("FSSf"),M=a("2UN5"),R=a("rIFM"),N=a("S256");function U(t,e){1&t&&(d.Pb(0,"div",8),d.Pb(1,"h3"),d.Ac(2,"Error occured"),d.Ob(),d.Pb(3,"p"),d.Ac(4,"Will retry in a 0s"),d.Ob(),d.Ob())}function C(t,e){1&t&&d.yc(0,U,5,0,"ng-template")}const D=[{component:(()=>{class t{constructor(t){this.stopInfoService=t,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.stopInfoService.createStopPointLocationObservable().subscribe({next:t=>{this.headerMapData=t}})),this.subscriptions.push(this.stopInfoService.createStopPassageRefreshObservable().subscribe({next:t=>{this.stopPassage=t}}))}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}}return t.\u0275fac=function(e){return new(e||t)(d.Kb(I))},t.\u0275cmp=d.Eb({type:t,selectors:[["app-stop-point-info"]],features:[d.zb([I])],decls:8,vars:5,consts:function(){let t,e;return t=$localize`:tab header departures|Departures@@departures␟891e36a38df10a0b8940219f4a51a03ea982c084␟1335502203219771538:Departures`,e=$localize`:tab header routes|Routes@@Routes␟41f0d60bbecc9f4b18c97c3656eeafe9a8f6d101␟99095597038876536:Routes`,[[3,"title"],["appOlStatic","",3,"mapData"],["mat-stretch-tabs","","dynamicHeight",""],["label",t],[3,"departures"],["label",e],[3,"routes"],[4,"ngIf"],[1,"error-box"]]},template:function(t,e){1&t&&(d.Pb(0,"app-header-box",0),d.Lb(1,"map",1),d.Ob(),d.Pb(2,"mat-tab-group",2),d.Pb(3,"mat-tab",3),d.Lb(4,"app-departure-list",4),d.Ob(),d.Pb(5,"mat-tab",5),d.Lb(6,"app-route-list",6),d.Ob(),d.Ob(),d.yc(7,C,1,0,void 0,7)),2&t&&(d.ic("title",null==e.stopPassage?null:e.stopPassage.stopName),d.Ab(1),d.hc("mapData",e.headerMapData),d.Ab(3),d.hc("departures",null==e.stopPassage?null:e.stopPassage.actual),d.Ab(2),d.hc("routes",null==e.stopPassage?null:e.stopPassage.routes),d.Ab(1),d.hc("ngIf",!1))},directives:[j.a,M.a,i.b,i.a,R.a,N.a,s.l],styles:["mat-tab-group[_ngcontent-%COMP%]{flex-grow:1}div.error-box[_ngcontent-%COMP%]{flex:0 0 auto;background:#b00020;color:#fff;padding:5px 20px}div.error-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:25px;line-height:30px;padding:0;margin:0}div.error-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;line-height:20px;padding:0;margin:0}"]}),t})(),data:{openSidebar:!0},path:":stopPointId",resolve:{stopPoint:O}}];let L=(()=>{class t{}return t.\u0275mod=d.Ib({type:t}),t.\u0275inj=d.Hb({factory:function(e){return new(e||t)},imports:[[P.i.forChild(D)],P.i]}),t})(),k=(()=>{class t{}return t.\u0275mod=d.Ib({type:t}),t.\u0275inj=d.Hb({factory:function(e){return new(e||t)},providers:[O],imports:[[s.c,c.a,r.b,o.d,p.b,n.a,L,i.c,b.a,u.b,l.a]]}),t})()}}]);