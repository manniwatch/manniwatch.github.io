"use strict";(self.webpackChunkmanniwatch=self.webpackChunkmanniwatch||[]).push([[43],{5043:($,u,s)=>{s.r(u),s.d(u,{StopModule:()=>G});var g=s(9808),h=s(5245),v=s(3379),m=s(773),i=s(3251),O=s(4594),P=s(83),M=s(2576),I=s(1837),R=s(8507),b=s(3411),e=s(5e3),r=s(3948),p=s(5357);let c=(()=>{class o extends b.Z{constructor(t,n,l){super(n,l),this.api=t}createLoader(t,n){return this.api.getStopPassages(t.params.stopId)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(r.sM),e.LFG(p.F0),e.LFG(r.jn))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var C=s(7445),T=s(4004),d=s(5577),f=s(3900),N=s(590),F=s(8675);let S=(()=>{class o{constructor(t,n,l,D){this.route=t,this.apiService=n,this.stopService=l,this.appRef=D,this.stopInfoObservable=this.route.data.pipe((0,T.U)(Z=>Z.stopInfo))}createStopLocationObservable(){return this.stopInfoObservable.pipe((0,d.z)(t=>this.stopService.filterStop(t.stopShortName)))}createStopPassageRefreshObservable(){return this.stopInfoObservable.pipe((0,f.w)(t=>this.appRef.isStable.pipe((0,N.P)(n=>n),(0,d.z)(()=>(0,C.F)(1e4).pipe((0,f.w)(()=>this.apiService.getStopPassages(t.stopShortName)))),(0,F.O)(t))))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(p.gz),e.LFG(r.sM),e.LFG(r.gd),e.LFG(e.z2F))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var y=s(9656),E=s(1959),x=s(9937),z=s(8277);const A=[{component:(()=>{class o{constructor(t){this.stopInfoService=t,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.stopInfoService.createStopPassageRefreshObservable().subscribe({next:t=>{this.stopPassage=t}})),this.subscriptions.push(this.stopInfoService.createStopLocationObservable().subscribe({next:t=>{this.headerMapData=t?{map:{center:t},stops:[t],vehicles:void 0}:{map:{blur:!0,center:void 0}}}}))}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(S))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-stop-info"]],features:[e._Bn([S])],decls:7,vars:4,consts:function(){let a,t;return a=$localize`:tab header departures|Departures@@departures␟891e36a38df10a0b8940219f4a51a03ea982c084␟1335502203219771538:Departures`,t=$localize`:tab header routes|Routes@@Routes␟41f0d60bbecc9f4b18c97c3656eeafe9a8f6d101␟99095597038876536:Routes`,[[3,"title"],["appOlStatic","",3,"mapData"],["mat-stretch-tabs","","dynamicHeight",""],["label",a],[3,"departures"],["label",t],[3,"routes"]]},template:function(t,n){1&t&&(e.TgZ(0,"app-header-box",0),e._UZ(1,"map",1),e.qZA(),e.TgZ(2,"mat-tab-group",2)(3,"mat-tab",3),e._UZ(4,"app-departure-list",4),e.qZA(),e.TgZ(5,"mat-tab",5),e._UZ(6,"app-route-list",6),e.qZA()()),2&t&&(e.Q6J("title",null==n.stopPassage?null:n.stopPassage.stopName),e.xp6(1),e.Q6J("mapData",n.headerMapData),e.xp6(3),e.Q6J("departures",null==n.stopPassage?null:n.stopPassage.actual),e.xp6(2),e.Q6J("routes",null==n.stopPassage?null:n.stopPassage.routes))},directives:[y.c,E.C,i.SP,i.uX,x.e,z.q],styles:["mat-tab-group[_ngcontent-%COMP%]{flex-grow:1}div.error-box[_ngcontent-%COMP%]{flex:0 0 auto;background:#b00020;color:#fff;padding:5px 20px}div.error-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:25px;line-height:30px;padding:0;margin:0}div.error-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;line-height:20px;padding:0;margin:0}"]}),o})(),data:{openSidebar:!0},path:":stopId",resolve:{stopInfo:c}}];let L=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.Bz.forChild(A)],p.Bz]}),o})(),G=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[c],imports:[[g.ez,h.Ps,v.ie,O.g0,m.Cq,L,i.Nh,P.n,M.D,I.qe,R.W]]}),o})()}}]);