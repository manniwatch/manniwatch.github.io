!function(){var t,e;function n(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{NHX4:function(r,i,s){"use strict";s.r(i),s.d(i,"StopPointModule",function(){return H});var c,u,p=s("ofXK"),b=s("NFeN"),f=s("MutI"),l=s("Xa2L"),h=s("wZkO"),d=s("/t3+"),v=s("adpU"),g=s("3cPY"),P=s("RSro"),O=s("Rfd2"),m=s("EY2u"),S=s("JIr8"),y=s("fXoL"),j=s("o0su"),w=s("tyNb"),x=((c=function(){function t(e,n){a(this,t),this.api=e,this.router=n}return o(t,[{key:"resolve",value:function(t,e){var n=this;return this.api.getStopPointPassages(t.params.stopPointId).pipe(Object(S.a)(function(t){return 404===t.status&&n.router.navigate(["stops"]),m.a}))}}]),t}()).\u0275fac=function(t){return new(t||c)(y.Wb(j.a),y.Wb(w.f))},c.\u0275prov=y.Ib({token:c,factory:c.\u0275fac}),c),R=s("l5mm"),I=s("lJxs"),k=s("eIep"),C=s("SxV6"),M=s("5+tZ"),N=s("JX91"),D=((u=function(){function t(e,n,r,o){a(this,t),this.route=e,this.apiService=n,this.stopService=r,this.appRef=o,this.stopPassageObservable=this.route.data.pipe(Object(I.a)(function(t){return t.stopPoint}))}return o(t,[{key:"createStopPassageRefreshObservable",value:function(){var t=this;return this.stopPassageObservable.pipe(Object(k.a)(function(e){return t.appRef.isStable.pipe(Object(C.a)(function(t){return t}),Object(M.a)(function(){return Object(R.a)(5e3).pipe(Object(k.a)(function(){return t.apiService.getStopPointPassages(e.stopShortName)}))}),Object(N.a)(e))}))}},{key:"createStopPointLocationObservable",value:function(){var t=this;return this.stopPassageObservable.pipe(Object(k.a)(function(e){return t.stopService.watchStopPoint(e.stopShortName).pipe(Object(N.a)(void 0))}),Object(I.a)(function(t){return null==t?{map:{blur:!0}}:{map:{blur:!1,center:t}}}))}}]),t}()).\u0275fac=function(t){return new(t||u)(y.Wb(w.a),y.Wb(j.a),y.Wb(j.c),y.Wb(y.g))},u.\u0275prov=y.Ib({token:u,factory:u.\u0275fac}),u),J=s("FSSf"),Q=s("2UN5"),W=s("rIFM"),z=s("S256");function _(t,e){1&t&&(y.Rb(0,"div",8),y.Rb(1,"h3"),y.Ac(2,"Error occured"),y.Qb(),y.Rb(3,"p"),y.Ac(4,"Will retry in a 0s"),y.Qb(),y.Qb())}function X(t,e){1&t&&y.yc(0,_,5,0,"ng-template")}var E,L,F,K=[{component:(E=function(){function t(e){a(this,t),this.stopInfoService=e,this.subscriptions=[]}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.subscriptions.push(this.stopInfoService.createStopPointLocationObservable().subscribe({next:function(e){t.headerMapData=e}})),this.subscriptions.push(this.stopInfoService.createStopPassageRefreshObservable().subscribe({next:function(e){t.stopPassage=e}}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(t){t.unsubscribe()}),this.subscriptions=[]}}]),t}(),E.\u0275fac=function(t){return new(t||E)(y.Mb(D))},E.\u0275cmp=y.Gb({type:E,selectors:[["app-stop-point-info"]],features:[y.Bb([D])],decls:8,vars:5,consts:function(){return[[3,"title"],["appOlStatic","",3,"mapData"],["mat-stretch-tabs","","dynamicHeight",""],["label",$localize(t||(t=n([":tab header departures|Departures@@departures\u241f891e36a38df10a0b8940219f4a51a03ea982c084\u241f1335502203219771538:Departures"])))],[3,"departures"],["label",$localize(e||(e=n([":tab header routes|Routes@@Routes\u241f41f0d60bbecc9f4b18c97c3656eeafe9a8f6d101\u241f99095597038876536:Routes"])))],[3,"routes"],[4,"ngIf"],[1,"error-box"]]},template:function(t,e){1&t&&(y.Rb(0,"app-header-box",0),y.Nb(1,"map",1),y.Qb(),y.Rb(2,"mat-tab-group",2),y.Rb(3,"mat-tab",3),y.Nb(4,"app-departure-list",4),y.Qb(),y.Rb(5,"mat-tab",5),y.Nb(6,"app-route-list",6),y.Qb(),y.Qb(),y.yc(7,X,1,0,void 0,7)),2&t&&(y.kc("title",null==e.stopPassage?null:e.stopPassage.stopName),y.Cb(1),y.jc("mapData",e.headerMapData),y.Cb(3),y.jc("departures",null==e.stopPassage?null:e.stopPassage.actual),y.Cb(2),y.jc("routes",null==e.stopPassage?null:e.stopPassage.routes),y.Cb(1),y.jc("ngIf",!1))},directives:[J.a,Q.a,h.b,h.a,W.a,z.a,p.l],styles:["mat-tab-group[_ngcontent-%COMP%]{flex-grow:1}div.error-box[_ngcontent-%COMP%]{flex:0 0 auto;background:#b00020;color:#fff;padding:5px 20px}div.error-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:25px;line-height:30px;padding:0;margin:0}div.error-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;line-height:20px;padding:0;margin:0}"]}),E),data:{openSidebar:!0},path:":stopPointId",resolve:{stopPoint:x}}],A=((F=function t(){a(this,t)}).\u0275mod=y.Kb({type:F}),F.\u0275inj=y.Jb({factory:function(t){return new(t||F)},imports:[[w.i.forChild(K)],w.i]}),F),H=((L=function t(){a(this,t)}).\u0275mod=y.Kb({type:L}),L.\u0275inj=y.Jb({factory:function(t){return new(t||L)},providers:[x],imports:[[p.c,v.a,b.b,f.d,d.b,l.a,A,h.c,g.a,P.b,O.a]]}),L)}}])}();