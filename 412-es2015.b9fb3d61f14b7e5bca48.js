(self.webpackChunk_manniwatch_client_ng=self.webpackChunk_manniwatch_client_ng||[]).push([[412],{74412:function(t,e,s){"use strict";s.r(e),s.d(e,{StopModule:function(){return D}});var a=s(38583),r=s(76627),o=s(77746),n=s(4885),p=s(65939),i=s(12522),c=s(80083),u=s(52576),l=s(64702),h=s(98507),f=s(66149),b=s(75894),g=s(37716),d=s(79373),v=s(72882);let m=(()=>{class t{constructor(t,e){this.api=t,this.router=e}resolve(t,e){return this.api.getStopPassages(t.params.stopId).pipe((0,b.K)(t=>(404===t.status&&this.router.navigate(["stops"]),f.E)))}}return t.\u0275fac=function(e){return new(e||t)(g.LFG(d.sM),g.LFG(v.F0))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac}),t})();var S=s(41565),P=s(5207),x=s(83864),O=s(37540),_=s(47920),z=s(69978);let w=(()=>{class t{constructor(t,e,s,a){this.route=t,this.apiService=e,this.stopService=s,this.appRef=a,this.stopInfoObservable=this.route.data.pipe((0,P.U)(t=>t.stopInfo))}createStopLocationObservable(){return this.stopInfoObservable.pipe((0,x.z)(t=>this.stopService.filterStop(t.stopShortName)))}createStopPassageRefreshObservable(){return this.stopInfoObservable.pipe((0,O.w)(t=>this.appRef.isStable.pipe((0,_.P)(t=>t),(0,x.z)(()=>(0,S.F)(1e4).pipe((0,O.w)(()=>this.apiService.getStopPassages(t.stopShortName)))),(0,z.O)(t))))}}return t.\u0275fac=function(e){return new(e||t)(g.LFG(v.gz),g.LFG(d.sM),g.LFG(d.gd),g.LFG(g.z2F))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac}),t})();var C=s(29656),I=s(71959),M=s(51322),Z=s(8277);const F=[{component:(()=>{class t{constructor(t){this.stopInfoService=t,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.stopInfoService.createStopPassageRefreshObservable().subscribe({next:t=>{this.stopPassage=t}})),this.subscriptions.push(this.stopInfoService.createStopLocationObservable().subscribe({next:t=>{this.headerMapData=t?{map:{center:t},stops:[t],vehicles:void 0}:{map:{blur:!0,center:void 0}}}}))}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(w))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-stop-info"]],features:[g._Bn([w])],decls:7,vars:4,consts:function(){let t,e;return t=$localize`:tab header departures|Departures@@departures␟891e36a38df10a0b8940219f4a51a03ea982c084␟1335502203219771538:Departures`,e=$localize`:tab header routes|Routes@@Routes␟41f0d60bbecc9f4b18c97c3656eeafe9a8f6d101␟99095597038876536:Routes`,[[3,"title"],["appOlStatic","",3,"mapData"],["mat-stretch-tabs","","dynamicHeight",""],["label",t],[3,"departures"],["label",e],[3,"routes"]]},template:function(t,e){1&t&&(g.TgZ(0,"app-header-box",0),g._UZ(1,"map",1),g.qZA(),g.TgZ(2,"mat-tab-group",2),g.TgZ(3,"mat-tab",3),g._UZ(4,"app-departure-list",4),g.qZA(),g.TgZ(5,"mat-tab",5),g._UZ(6,"app-route-list",6),g.qZA(),g.qZA()),2&t&&(g.Q6J("title",null==e.stopPassage?null:e.stopPassage.stopName),g.xp6(1),g.Q6J("mapData",e.headerMapData),g.xp6(3),g.Q6J("departures",null==e.stopPassage?null:e.stopPassage.actual),g.xp6(2),g.Q6J("routes",null==e.stopPassage?null:e.stopPassage.routes))},directives:[C.c,I.C,p.SP,p.uX,M.e,Z.q],styles:["mat-tab-group[_ngcontent-%COMP%]{flex-grow:1}div.error-box[_ngcontent-%COMP%]{flex:0 0 auto;background:#b00020;color:#fff;padding:5px 20px}div.error-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:25px;line-height:30px;padding:0;margin:0}div.error-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;line-height:20px;padding:0;margin:0}"]}),t})(),data:{openSidebar:!0},path:":stopId",resolve:{stopInfo:m}}];let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[v.Bz.forChild(F)],v.Bz]}),t})(),D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({providers:[m],imports:[[a.ez,r.Ps,o.ie,i.g0,n.Cq,y,p.Nh,c.n,u.D,l.qe,h.W]]}),t})()}}]);