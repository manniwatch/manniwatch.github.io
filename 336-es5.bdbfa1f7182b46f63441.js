!function(){"use strict";var t,e;function n(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}(self.webpackChunk_manniwatch_client_ng=self.webpackChunk_manniwatch_client_ng||[]).push([[336],{2336:function(a,i,s){s.r(i),s.d(i,{StopPointModule:function(){return j}});var u,p=s(38583),c=s(76627),f=s(77746),l=s(4885),h=s(65939),b=s(12522),g=s(80083),v=s(52576),d=s(64702),P=s(98507),m=s(9018),O=s(33568),S=s(37716),x=s(37695),w=s(57391),y=((u=function(){function t(e,n){r(this,t),this.api=e,this.router=n}return o(t,[{key:"resolve",value:function(t,e){var n=this;return this.api.getStopPointPassages(t.params.stopPointId).pipe((0,O.K)(function(t){return 404===t.status&&n.router.navigate(["stops"]),m.E}))}}]),t}()).\u0275fac=function(t){return new(t||u)(S.LFG(x.sM),S.LFG(w.F0))},u.\u0275prov=S.Yz7({token:u,factory:u.\u0275fac}),u),_=s(15490),Z=s(27969),z=s(61528),k=s(79676),C=s(63159),M=s(51927),q=function(){var t=function(){function t(e,n,a,o){r(this,t),this.route=e,this.apiService=n,this.stopService=a,this.appRef=o,this.stopPassageObservable=this.route.data.pipe((0,Z.U)(function(t){return t.stopPoint}))}return o(t,[{key:"createStopPassageRefreshObservable",value:function(){var t=this;return this.stopPassageObservable.pipe((0,z.w)(function(e){return t.appRef.isStable.pipe((0,k.P)(function(t){return t}),(0,C.z)(function(){return(0,_.F)(5e3).pipe((0,z.w)(function(){return t.apiService.getStopPointPassages(e.stopShortName)}))}),(0,M.O)(e))}))}},{key:"createStopPointLocationObservable",value:function(){var t=this;return this.stopPassageObservable.pipe((0,z.w)(function(e){return t.stopService.watchStopPoint(e.stopShortName).pipe((0,M.O)(void 0))}),(0,Z.U)(function(t){return null==t?{map:{blur:!0}}:{map:{blur:!1,center:t}}}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(S.LFG(w.gz),S.LFG(x.sM),S.LFG(x.gd),S.LFG(S.z2F))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac}),t}(),A=s(29656),F=s(71959),D=s(51322),I=s(8277);function L(t,e){1&t&&(S.TgZ(0,"div",8),S.TgZ(1,"h3"),S._uU(2,"Error occured"),S.qZA(),S.TgZ(3,"p"),S._uU(4,"Will retry in a 0s"),S.qZA(),S.qZA())}function T(t,e){1&t&&S.YNc(0,L,5,0,"ng-template")}var R=[{component:function(){var a=function(){function t(e){r(this,t),this.stopInfoService=e,this.subscriptions=[]}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.subscriptions.push(this.stopInfoService.createStopPointLocationObservable().subscribe({next:function(e){t.headerMapData=e}})),this.subscriptions.push(this.stopInfoService.createStopPassageRefreshObservable().subscribe({next:function(e){t.stopPassage=e}}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(t){t.unsubscribe()}),this.subscriptions=[]}}]),t}();return a.\u0275fac=function(t){return new(t||a)(S.Y36(q))},a.\u0275cmp=S.Xpm({type:a,selectors:[["app-stop-point-info"]],features:[S._Bn([q])],decls:8,vars:5,consts:function(){return[[3,"title"],["appOlStatic","",3,"mapData"],["mat-stretch-tabs","","dynamicHeight",""],["label",$localize(t||(t=n([":tab header departures|Departures@@departures\u241f891e36a38df10a0b8940219f4a51a03ea982c084\u241f1335502203219771538:Departures"])))],[3,"departures"],["label",$localize(e||(e=n([":tab header routes|Routes@@Routes\u241f41f0d60bbecc9f4b18c97c3656eeafe9a8f6d101\u241f99095597038876536:Routes"])))],[3,"routes"],[4,"ngIf"],[1,"error-box"]]},template:function(t,e){1&t&&(S.TgZ(0,"app-header-box",0),S._UZ(1,"map",1),S.qZA(),S.TgZ(2,"mat-tab-group",2),S.TgZ(3,"mat-tab",3),S._UZ(4,"app-departure-list",4),S.qZA(),S.TgZ(5,"mat-tab",5),S._UZ(6,"app-route-list",6),S.qZA(),S.qZA(),S.YNc(7,T,1,0,void 0,7)),2&t&&(S.s9C("title",null==e.stopPassage?null:e.stopPassage.stopName),S.xp6(1),S.Q6J("mapData",e.headerMapData),S.xp6(3),S.Q6J("departures",null==e.stopPassage?null:e.stopPassage.actual),S.xp6(2),S.Q6J("routes",null==e.stopPassage?null:e.stopPassage.routes),S.xp6(1),S.Q6J("ngIf",!1))},directives:[A.c,F.C,h.SP,h.uX,D.e,I.q,p.O5],styles:["mat-tab-group[_ngcontent-%COMP%]{flex-grow:1}div.error-box[_ngcontent-%COMP%]{flex:0 0 auto;background:#B00020;color:#fff;padding:5px 20px}div.error-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:25px;line-height:30px;padding:0;margin:0}div.error-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;line-height:20px;padding:0;margin:0}"]}),a}(),data:{openSidebar:!0},path:":stopPointId",resolve:{stopPoint:y}}],U=function(){var t=function t(){r(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=S.oAB({type:t}),t.\u0275inj=S.cJS({imports:[[w.Bz.forChild(R)],w.Bz]}),t}(),j=function(){var t=function t(){r(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=S.oAB({type:t}),t.\u0275inj=S.cJS({providers:[y],imports:[[p.ez,g.n,c.Ps,f.ie,b.g0,l.Cq,U,h.Nh,v.D,d.qe,P.W]]}),t}()}}])}();